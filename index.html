<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Libretto Elettronico - Lorenzo Segale</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- Stile Generale --- */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* --- Header --- */
        .header {
            background-color: #800000; /* Colore istituzionale Ca' Foscari */
            color: white;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 1.8em;
            font-weight: 500;
        }

        .header .student-info {
            text-align: right;
        }

        .header .student-info p {
            margin: 0;
            font-weight: 300;
        }

        /* --- Sezione Riepilogo --- */
        .summary-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .summary-card {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            text-align: center;
            border-left: 5px solid #800000;
        }
        
        .summary-card h3 {
            margin-top: 0;
            color: #555;
            font-weight: 400;
        }

        .summary-card .value {
            font-size: 2.5em;
            font-weight: 700;
            color: #800000;
        }

        /* --- Tabella Libretto --- */
        .libretto-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            overflow-x: auto; /* Per responsività su schermi piccoli */
        }
        
        .libretto-card h2 {
            padding: 20px;
            margin: 0;
            border-bottom: 1px solid #eee;
            color: #800000;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        thead {
            background-color: #f9f9f9;
        }

        th {
            font-weight: 500;
            color: #555;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        tbody tr:hover {
            background-color: #fdf5f5;
        }
        
        /* --- Indicatori di Stato --- */
        .status {
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: 500;
            font-size: 0.85em;
            display: inline-block;
            color: white;
        }

        .status-passed {
            background-color: #28a745; /* Verde */
        }

        .status-pending {
            background-color: #ffc107; /* Giallo/Arancione */
            color: #333;
        }
        
        .grade {
            font-weight: 700;
            font-size: 1.1em;
        }

        .lode {
            color: #b71c1c;
            font-weight: bold;
        }
        
        /* --- Footer --- */
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            font-size: 0.9em;
            color: #777;
        }
        
        /* --- Media Query per Dispositivi Mobili --- */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
            }
            .header .student-info {
                text-align: center;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>

    <header class="header">
        <h1>Libretto Elettronico</h1>
        <div class="student-info">
            <p><strong>Studente:</strong> Lorenzo Segale</p>
            <p><strong>Matricola:</strong> 906023 | <strong>Corso:</strong> Ingegneria Fisica</p>
        </div>
    </header>

    <div class="container">

        <section class="summary-section">
            <div class="summary-card">
                <h3>Media Ponderata</h3>
                <p class="value" id="media-ponderata">-- / 30</p>
            </div>
            <div class="summary-card">
                <h3>CFU Acquisiti</h3>
                <p class="value" id="cfu-totali">-- / 60</p>
            </div>
            <div class="summary-card">
                <h3>Voto di Laurea (Stima)</h3>
                <p class="value" id="voto-laurea">-- / 110</p>
            </div>
        </section>

        <section class="libretto-card">
            <h2>Dettaglio Carriera - Anno 1</h2>
            <table>
                <thead>
                    <tr>
                        <th>Attività Didattica</th>
                        <th>CFU</th>
                        <th>Stato</th>
                        <th>Voto</th>
                        <th>Data Esame</th>
                    </tr>
                </thead>
                <tbody id="exam-table-body">
                    <!-- I dati vengono inseriti qui da JavaScript -->
                    <!-- Esame Superato -->
                    <tr data-status="passed" data-cfu="9" data-grade="28">
                        <td>Analisi Matematica I</td>
                        <td>9</td>
                        <td><span class="status status-passed">Superato</span></td>
                        <td class="grade">28</td>
                        <td>10/02/2024</td>
                    </tr>
                    <!-- Esame Superato -->
                    <tr data-status="passed" data-cfu="6" data-grade="25">
                        <td>Fondamenti di Chimica</td>
                        <td>6</td>
                        <td><span class="status status-passed">Superato</span></td>
                        <td class="grade">25</td>
                        <td>15/06/2024</td>
                    </tr>
                    <!-- Esame Superato con Lode -->
                    <tr data-status="passed" data-cfu="12" data-grade="30L">
                        <td>Informatica I</td>
                        <td>12</td>
                        <td><span class="status status-passed">Superato</span></td>
                        <td class="grade">30 <span class="lode">e Lode</span></td>
                        <td>25/06/2024</td>
                    </tr>
                    <!-- Esame Superato -->
                    <tr data-status="passed" data-cfu="9" data-grade="26">
                        <td>Analisi Matematica II</td>
                        <td>9</td>
                        <td><span class="status status-passed">Superato</span></td>
                        <td class="grade">26</td>
                        <td>01/07/2024</td>
                    </tr>
                    <!-- Esame Superato -->
                    <tr data-status="passed" data-cfu="6" data-grade="30">
                        <td>Algebra Lineare</td>
                        <td>6</td>
                        <td><span class="status status-passed">Superato</span></td>
                        <td class="grade">30</td>
                        <td>15/07/2024</td>
                    </tr>
                    <!-- Esame Superato -->
                    <tr data-status="passed" data-cfu="9" data-grade="29">
                        <td>Fisica I</td>
                        <td>9</td>
                        <td><span class="status status-passed">Superato</span></td>
                        <td class="grade">29</td>
                        <td>20/07/2024</td>
                    </tr>
                     <!-- Esami Idoneità (non fanno media) -->
                    <tr data-status="passed" data-cfu="3" data-grade="idoneo">
                        <td>Lingua Inglese B2</td>
                        <td>3</td>
                        <td><span class="status status-passed">Idoneo</span></td>
                        <td>-</td>
                        <td>22/08/2024</td>
                    </tr>
                    <!-- Esame NON superato -->
                    <tr data-status="pending" data-cfu="6" data-grade="N/A">
                        <td>Statistica</td>
                        <td>6</td>
                        <td><span class="status status-pending">Da Sostenere</span></td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </tbody>
            </table>
        </section>
        
    </div>

    <footer>
        <p>&copy; 2024 Università Ca' Foscari Venezia - Simulazione Libretto Studente</p>
    </footer>

    <script>
        // Funzione eseguita quando il documento è completamente caricato
        document.addEventListener('DOMContentLoaded', function() {
            
            // Seleziona tutte le righe degli esami
            const examRows = document.querySelectorAll('#exam-table-body tr');
            
            let totalCFU = 0;
            let weightedSum = 0; // Somma di (voto * cfu)
            let cfuForAverage = 0; // CFU totali che fanno media

            // Itera su ogni riga della tabella
            examRows.forEach(row => {
                const status = row.dataset.status;
                const cfu = parseInt(row.dataset.cfu);
                
                // Aggiunge i CFU al totale solo se l'esame è stato superato (o idoneo)
                if (status === 'passed') {
                    totalCFU += cfu;
                    
                    let grade = row.dataset.grade;
                    
                    // Controlla se il voto è numerico e non 'idoneo'
                    if (!isNaN(parseInt(grade))) {
                        // Gestisce il "30 e Lode" come 30 per il calcolo della media
                        if (grade.includes('L')) {
                            grade = 30;
                        } else {
                            grade = parseInt(grade);
                        }
                        
                        // Aggiorna le somme per il calcolo della media
                        weightedSum += grade * cfu;
                        cfuForAverage += cfu;
                    }
                }
            });

            // Calcola la media ponderata
            const weightedAverage = cfuForAverage > 0 ? (weightedSum / cfuForAverage) : 0;
            
            // Calcola la stima del voto di laurea (Media * 110 / 30)
            const estimatedGraduationScore = weightedAverage > 0 ? (weightedAverage * 110 / 30) : 0;

            // Aggiorna gli elementi HTML con i valori calcolati
            document.getElementById('media-ponderata').textContent = `${weightedAverage.toFixed(2)} / 30`;
            document.getElementById('cfu-totali').textContent = `${totalCFU} / 60`;
            document.getElementById('voto-laurea').textContent = `${estimatedGraduationScore.toFixed(2)} / 110`;

        });
    </script>

</body>
</html>
